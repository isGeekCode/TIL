# OSI 7 Layer
OSI 7 계층 (Open Systems Interconnection Reference Model) 은 컴퓨터 네트워크에서 **통신이 일어나는 과정**을 7개의 계층으로 나누어 정의한 모델이다. 각 계층은 서로 다른 기능을 수행한다.

### 물리 계층(Physical Layer)
  - 데이터를 전송하는 물리적인 매체와 인터페이스를 정의한다.
  - 전송하는 데이터는 전기, 광 또는 무선 등으로 전달된다.
  - 데이터가 전기 신호로 변환되어 전송되는 과정을 담당한다. 
  - 예를 들어, 이더넷 케이블, 무선 주파수 등이 이 계층에 해당된다.

### 데이터 링크 계층(Data Link Layer)
  - 물리 계층을 이용하여 데이터를 전송하며, 오류 검출 및 복구, 흐름 제어 등을 수행한다. 
  - 물리 계층에서 전송된 데이터를 패킷으로 분할하고, 각 패킷에 MAC 주소를 할당하여 데이터를 전송한다.
  - 예를 들어, 이더넷 프로토콜이 이 계층에 해당합니다.

### 네트워크 계층(Network Layer)
  - 여러 대의 컴퓨터가 연결된 네트워크 상에서 다른 네트워크와 데이터를 전송하기 위한 경로를 결정한다. 이를 위해 IP 주소를 할당하고, 라우팅을 수행한다. 
  - 예를 들어, 인터넷 프로토콜(IP)이 이 계층에 해당합니다.이 계층은 IP(Internet Protocol) 주소를 이용하여 데이터를 전송한다.

### 전송 계층(Transport Layer)
  - 통신을 유지하며, 오류 검출 및 복구, 흐름 제어 등을 수행한다.
  - 이를 위해 TCP(Transmission Control Protocol) 또는 UDP(User Datagram Protocol)를 이용하여 데이터를 전송한다.
  - 데이터를 전송하는 과정에서 신뢰성을 보장하고, 데이터가 올바르게 전송되도록 제어한다. 
  - 예를 들어, 파일 전송, 이메일 전송 등이 이 계층에 해당합니다.

### 세션 계층(Session Layer)
  - 데이터의 통신 세션을 설정, 유지, 해제하는 역할을 하고, 동기화 등을 수행한다.
  - 예를 들어, 인터넷 뱅킹, 채팅 등의 세션 기능이 이 계층에 해당한다.

### 표현 계층(Presentation Layer)
  - 데이터를 표현하고 압축, 암호화, 인코딩 등을 수행한다.
  - 예를 들어, 이미지, 음악, 비디오 파일 등의 표현과 암호화 기능이 이 계층에 해당한다.

### 응용 계층(Application Layer)
  - 사용자가 네트워크를 통해 직접 사용하는 응용 프로그램에 대한 서비스를 제공한다.
  - 예를 들어, 웹 브라우저, 이메일 클라이언트, 파일 전송 프로그램 등이 이 계층에 해당합니다.


# 계층간의 흐름

OSI 7계층 모델에서는 상위 계층에서 전송한 데이터를 하위 계층이 차례대로 처리하고, 반대로 처리결과는 하위 계층에서 상위 계층으로 전달한다. 이 과정에서 각 계층은 서로 독립적으로 작동하면서, 특정 기능을 수행하고 다음 계층으로 데이터를 전달합한다. 데이터의 이동 과정은 각 계층마다 특정한 데이터 구조를 사용합니다. 상위 계층에서 전송된 데이터는 하위 계층으로 내려가면서 헤더(Header)와 트레일러(Trailer) 정보가 추가된다. 이 정보는 각 계층에서 수행한 처리 결과를 나타내며, 다음 계층에서 필요한 정보를 제공한다.


예를 들어, 사용자가 웹 브라우저를 실행하여 인터넷에 접속하는 과정에서는 다음과 같은 데이터 구조가 사용된다.

- 응용 계층(Application Layer): HTTP(HyperText Transfer Protocol) 요청 메시지를 생성한다. 이 메시지는 헤더와 바디(Body)로 구성된다. 헤더는 요청 메시지에 대한 정보를 포함하고, 바디는 전송할 데이터를 포함한다.

- 전송 계층(Transport Layer): HTTP 요청 메시지를 받은 전송 계층은 TCP(Transmission Control Protocol) 프로토콜을 사용하여 세그먼트로 분할하고, 각 세그먼트에 시퀀스 번호를 부여하여 전송한다. 이때, 헤더에는 TCP 프로토콜의 제어 정보를 추가한다.

- 네트워크 계층(Network Layer): 전송된 세그먼트를 받은 네트워크 계층은 IP(Internet Protocol) 프로토콜을 사용하여 패킷으로 분할하고, 각 패킷에 IP 주소를 할당하여 전송한다. 이때, 헤더에는 IP 프로토콜의 주소 정보를 추가한다.

- 데이터 링크 계층(Data Link Layer): 패킷을 받은 데이터 링크 계층은 MAC(Media Access Control) 주소를 할당하여 프레임으로 전송한다. 이때, 헤더에는 MAC 주소 정보를 추가한다.

- 물리 계층(Physical Layer): 프레임을 받은 물리 계층은 전기, 광 또는 무선 등의 신호로 변환하여 수신측으로 전송한다.

이처럼 각 계층에서는 데이터 구조를 이용하여 데이터를 전송하고 처리하며, 다음 계층으로 전달될 때 필요한 정보를 추가한다. 이 정보는 각 계층에서 수행한 처리 결과를 나타내며, 다음 계층에서 필요한 정보를 제공한다.

반대로, 하위 계층에서 상위 계층으로 데이터를 전달할 때는 이전 계층에서 추가된 정보를 제거하고, 해당 계층에서 수행한 처리 결과를 상위 계층으로 전달한다. 이를 통해 각 계층에서는 자신이 수행해야 할 기능에만 집중하여, 전체적인 통신 과정을 효율적으로 처리할 수 있다.

이처럼 OSI 7계층 모델에서는 각 계층이 독립적으로 작동하면서, 데이터를 전송하고 처리하는 과정에서 각 계층이 제공하는 서비스를 이용한다. 각 계층은 서로 다른 기능을 수행하며, 이전 계층과 다음 계층 간에는 명확한 인터페이스가 정의되어 있어 데이터의 전송과 처리가 원활하게 이루어진다.


# 캡슐화와 디캡슐화 (Encapsulation / Decapsulation)

캡슐화(Encapsulation)는 상위 계층에서 하위 계층으로 데이터를 전달할 때, 각 계층마다 데이터에 추가 정보를 붙여서 패킷으로 만드는 과정을 말한다. 이렇게 만들어진 패킷은 하위 계층에서 상위 계층으로 전달될 때, 각 계층에서 추가된 정보가 제거되고, 해당 계층에서 필요한 정보만 추출되어 전달된다.

예를 들어, `사용자가 인터넷을 통해 파일을 다운로드하는 과정`에서, 다음과 같은 캡슐화 과정이 이루어진다.

- 응용 계층(Application Layer): 파일 다운로드 요청 메시지를 생성한다. 이 메시지는 헤더와 바디(Body)로 구성된다.

- 전송 계층(Transport Layer): HTTP 요청 메시지를 받은 전송 계층은 TCP(Transmission Control Protocol) 프로토콜을 사용하여 세그먼트로 분할하고, 각 세그먼트에 시퀀스 번호를 부여하여 전송합니다. 이때, 헤더에는 TCP 프로토콜의 제어 정보를 추가한다.

- 네트워크 계층(Network Layer): 전송된 세그먼트를 받은 네트워크 계층은 IP(Internet Protocol) 프로토콜을 사용하여 패킷으로 분할하고, 각 패킷에 IP 주소를 할당하여 전송한다. 이때, 헤더에는 IP 프로토콜의 주소 정보를 추가한다.

- 데이터 링크 계층(Data Link Layer): 패킷을 받은 데이터 링크 계층은 MAC(Media Access Control) 주소를 할당하여 프레임으로 전송한다. 이때, 헤더에는 MAC 주소 정보를 추가한다.

- 물리 계층(Physical Layer): 프레임을 받은 물리 계층은 전기, 광 또는 무선 등의 신호로 변환하여 수신측으로 전송한다.

이렇게 상위 계층에서 하위 계층으로 데이터가 전달될 때, 각 계층에서 추가 정보가 붙어서 패킷으로 만들어지는 것을 캡슐화라고 한다.

반대로, 디캡슐화(Decapsulation)는 하위 계층에서 상위 계층으로 전달된 패킷에서, 각 계층에서 추가된 정보를 제거하고, 해당 계층에서 필요한 정보만 추출하여 상위 계층으로 전달하는 것을 말한다.


# 캡슐화 디캡슐화는 직렬화랑 비슷한 것인지
캡슐화(Encapsulation)와 직렬화(Serialization)는 서로 다른 개념이다.

캡슐화는 OSI 7계층에서 하위 계층에서 상위 계층으로 데이터를 전달할 때, 각 계층에서 데이터에 추가 정보를 붙여서 패킷으로 만드는 과정을 말한다. 이렇게 만들어진 패킷은 상위 계층에서 하위 계층으로 전달될 때, 각 계층에서 추가된 정보가 제거되고, 해당 계층에서 필요한 정보만 추출되어 전달된다.

반면, 직렬화는 객체를 바이트 형태로 변환하여 저장하거나 네트워크로 전송할 수 있게 만드는 과정을 말한다. 이 과정에서 객체의 상태 정보를 바이트 스트림으로 변환하여 직렬화된 데이터로 만든다. 이렇게 만들어진 직렬화된 데이터는 전송 또는 저장이 필요한 경우, 다시 역직렬화하여 객체로 복원할 수 있다.

따라서, 캡슐화와 직렬화는 서로 다른 개념이며, 각각 다른 목적을 가지고 있다. 캡슐화는 데이터를 계층적 구조로 나누고 각 계층에서 필요한 정보를 추가하여 전달하는 것을 목적으로 하며, 직렬화는 객체의 상태 정보를 바이트 스트림으로 변환하여 전송이나 저장을 위한 것을 목적으로 한다.


# IOS에서의 OSI7 계층은
사용자가 iOS 기기에서 인터넷 검색을 수행할 때, OSI 7계층 모델을 따라 데이터가 이동하는 과정을 예로 들어볼 수 있다.

- 물리 계층(Physical Layer)
  - 사용자가 iOS 기기에서 인터넷 검색을 요청하면, iOS 기기는 Wi-Fi나 LTE와 같은 물리적 매체를 사용하여 데이터를 전송한다.

- 데이터 링크 계층(Data Link Layer)
  - 데이터가 전송되면, iOS 기기는 데이터를 이더넷 프로토콜로 분할하고, 오류 검사와 흐름 제어 등의 기능을 수행한다.

- 네트워크 계층(Network Layer)
  - 이더넷 프로토콜로 분할된 데이터는 IP(Internet Protocol) 프로토콜을 사용하여 패킷으로 분할된다. iOS 기기는 패킷을 전송하기 위한 경로를 선택하는 라우팅 기능을 수행한다.

- 전송 계층(Transport Layer)
  - 패킷은 TCP(Transmission Control Protocol) 프로토콜을 사용하여 세그먼트로 분할되고, 세그먼트에 시퀀스 번호를 할당하여 전송된다.

- 세션 계층(Session Layer)
  - 세션 계층은 양 끝단의 애플리케이션 간 세션 연결을 설정하고, 세션을 관리하는 기능을 수행한다. 인터넷 검색의 경우, 세션 계층을 별도로 구현하지 않는다.

- 표현 계층(Presentation Layer)
  - 표현 계층은 데이터의 표현 형식을 정의하고, 데이터를 변환하는 기능을 수행한다. 인터넷 검색의 경우, iOS 기기는 HTML(Hypertext Markup Language) 등의 데이터 형식을 사용하여 데이터를 표현한다.

- 응용 계층(Application Layer)
  - 응용 계층은 사용자가 사용하는 응용 프로그램 간의 통신을 관리하는 기능을 수행한다. 인터넷 검색의 경우, iOS 기기에서는 Safari라는 응용 프로그램이 사용되며, HTTP(Hypertext Transfer Protocol) 프로토콜을 사용하여 데이터를 전송한다.


## 물리계층 -> 응용계층으로 가는 다른 예시들
iOS에서 OSI 7계층 모델을 따라 물리 계층에서부터 응용 계층으로 데이터가 이동하는 상황에는 여러 가지가 있을 수 있다. 몇 가지 예시를 들어보면:

**사용자가 사진을 카메라로 찍어서 iMessage 애플리케이션을 사용하여 다른 사용자에게 보내는 경우:**
- 물리 계층: 카메라에서 찍은 사진 데이터를 전송하는 물리적 매체(예: Wi-Fi, LTE 등)로 전송
- 데이터 링크 계층: 사진 데이터를 이더넷 프로토콜로 분할하고, 오류 검사와 흐름 제어 등의 기능을 수행
- 네트워크 계층: IP 프로토콜을 사용하여 패킷을 목적지 주소로 전송
- 전송 계층: TCP 프로토콜을 사용하여 데이터를 패킷으로 분할하고, 패킷에 시퀀스 번호를 할당하여 전송
- 세션 계층: 사진 데이터를 전송하기 위한 세션을 설정
- 표현 계층: 사진 데이터를 JPEG(Joint Photographic Experts Group) 등의 형식으로 변환
- 응용 계층: iMessage 애플리케이션에서 전송하는 메시지에 사진 데이터를 첨부하여 전송


**사용자가 파일을 iCloud Drive에 업로드하는 경우:**
- 물리 계층: 파일 데이터를 전송하는 물리적 매체(예: Wi-Fi, LTE 등)로 전송
- 데이터 링크 계층: 파일 데이터를 이더넷 프로토콜로 분할하고, 오류 검사와 흐름 제어 등의 기능을 수행
- 네트워크 계층: IP 프로토콜을 사용하여 패킷을 목적지 주소로 전송
- 전송 계층: TCP 프로토콜을 사용하여 데이터를 패킷으로 분할하고, 패킷에 시퀀스 번호를 할당하여 전송
- 세션 계층: 파일 데이터를 전송하기 위한 세션을 설정
- 표현 계층: 파일 데이터를 이진 형식으로 변환
- 응용 계층: iCloud Drive 애플리케이션에서 파일 데이터를 업로드하여 저장


## 응용계층 -> 물리계층으로 가는 다른 예시들

**사용자가 메일 애플리케이션을 사용하여 이메일을 전송하는 경우**
- 응용 계층: 메일 애플리케이션에서 사용자가 작성한 이메일 데이터
- 표현 계층: 이메일 데이터를 MIME(Multipurpose Internet Mail Extensions) 형식으로 변환
- 세션 계층: 이메일 데이터를 전송하기 위한 세션을 설정
- 전송 계층: TCP(Transmission Control Protocol) 프로토콜을 사용하여 데이터를 패킷으로 분할하고, 패킷에 시퀀스 번호를 할당하여 전송
- 네트워크 계층: IP(Internet Protocol) 프로토콜을 사용하여 패킷을 목적지 주소로 전송
- 데이터 링크 계층: 패킷을 이더넷 프로토콜로 분할하고, 오류 검사와 흐름 제어 등의 기능을 수행
- 물리 계층: 데이터가 전송되는 물리적 매체(예: Wi-Fi, LTE 등)를 통해 데이터를 전송


**사용자가 Safari 애플리케이션을 사용하여 웹 페이지를 로드하는 경우:**
- 응용 계층: Safari 애플리케이션에서 사용자가 요청한 웹 페이지 데이터
- 표현 계층: 웹 페이지 데이터를 HTML(Hypertext Markup Language) 등의 형식으로 변환
- 세션 계층: 웹 페이지 데이터를 전송하기 위한 세션을 설정
- 전송 계층: TCP 프로토콜을 사용하여 데이터를 패킷으로 분할하고, 패킷에 시퀀스 번호를 할당하여 전송
- 네트워크 계층: IP 프로토콜을 사용하여 패킷을 목적지 주소로 전송
- 데이터 링크 계층: 패킷을 이더넷 프로토콜로 분할하고, 오류 검사와 흐름 제어 등의 기능을 수행
- 물리 계층: 데이터가 전송되는 물리적 매체(예: Wi-Fi, LTE 등)를 통해 데이터를 전송


# 계층 순서 암기하기

## 물리 계층에서 응용 계층까지(아래에서 위로): (P-D-N-T-S-P-A)

소세지 피자를 버리지 마 "Please-Do-Not-Throw-Sausage-Pizza-Away"
물데네전세표응 "물을 데우는 기술을 네트워크로 전세계에 표현하고, 응용해주세요."


## 응용 계층에서 물리 계층까지(위에서 아래로) (A-P-S-T-N-D-P)
애완뱀은 파이썬을 하지 않으려 했다. "A Pet Snake Tried Not To Do Python"
응표세전네데물
