# OSI 7 Layer
OSI 7 계층 (Open Systems Interconnection Reference Model) 은 컴퓨터 네트워크에서 통신이 일어나는 과정을 7개의 계층으로 나누어 정의한 모델이다. 각 계층은 서로 다른 기능을 수행한다.

### 물리 계층(Physical Layer)
  - 데이터를 전송하는 물리적인 매체와 인터페이스를 정의한다.
  - 전송하는 데이터는 전기, 광 또는 무선 등으로 전달된다.
  - 데이터가 전기 신호로 변환되어 전송되는 과정을 담당한다. 
  - 예를 들어, 이더넷 케이블, 무선 주파수 등이 이 계층에 해당된다.

### 데이터 링크 계층(Data Link Layer)
  - 물리 계층을 이용하여 데이터를 전송하며, 오류 검출 및 복구, 흐름 제어 등을 수행한다. 
  - 물리 계층에서 전송된 데이터를 패킷으로 분할하고, 각 패킷에 MAC 주소를 할당하여 데이터를 전송한다.
  - 예를 들어, 이더넷 프로토콜이 이 계층에 해당합니다.

### 네트워크 계층(Network Layer)
  - 여러 대의 컴퓨터가 연결된 네트워크 상에서 다른 네트워크와 데이터를 전송하기 위한 경로를 결정한다. 이를 위해 IP 주소를 할당하고, 라우팅을 수행한다. 
  - 예를 들어, 인터넷 프로토콜(IP)이 이 계층에 해당합니다.이 계층은 IP(Internet Protocol) 주소를 이용하여 데이터를 전송한다.

### 전송 계층(Transport Layer)
  - 통신을 유지하며, 오류 검출 및 복구, 흐름 제어 등을 수행한다.
  - 이를 위해 TCP(Transmission Control Protocol) 또는 UDP(User Datagram Protocol)를 이용하여 데이터를 전송한다.
  - 데이터를 전송하는 과정에서 신뢰성을 보장하고, 데이터가 올바르게 전송되도록 제어한다. 
  - 예를 들어, 파일 전송, 이메일 전송 등이 이 계층에 해당합니다.

### 세션 계층(Session Layer)
  - 데이터의 통신 세션을 설정, 유지, 해제하는 역할을 하고, 동기화 등을 수행한다.
  - 예를 들어, 인터넷 뱅킹, 채팅 등의 세션 기능이 이 계층에 해당한다.

### 표현 계층(Presentation Layer)
  - 데이터를 표현하고 압축, 암호화, 인코딩 등을 수행한다.
  - 예를 들어, 이미지, 음악, 비디오 파일 등의 표현과 암호화 기능이 이 계층에 해당한다.

### 응용 계층(Application Layer)
  - 사용자가 네트워크를 통해 직접 사용하는 응용 프로그램에 대한 서비스를 제공한다.
  - 예를 들어, 웹 브라우저, 이메일 클라이언트, 파일 전송 프로그램 등이 이 계층에 해당합니다.


# 계층간의 흐름

OSI 7계층 모델에서는 상위 계층에서 전송한 데이터를 하위 계층이 차례대로 처리하고, 반대로 처리결과는 하위 계층에서 상위 계층으로 전달한다. 이 과정에서 각 계층은 서로 독립적으로 작동하면서, 특정 기능을 수행하고 다음 계층으로 데이터를 전달합한다. 데이터의 이동 과정은 각 계층마다 특정한 데이터 구조를 사용합니다. 상위 계층에서 전송된 데이터는 하위 계층으로 내려가면서 헤더(Header)와 트레일러(Trailer) 정보가 추가된다. 이 정보는 각 계층에서 수행한 처리 결과를 나타내며, 다음 계층에서 필요한 정보를 제공한다.


예를 들어, 사용자가 웹 브라우저를 실행하여 인터넷에 접속하는 과정에서는 다음과 같은 데이터 구조가 사용된다.

- 응용 계층(Application Layer): HTTP(HyperText Transfer Protocol) 요청 메시지를 생성한다. 이 메시지는 헤더와 바디(Body)로 구성된다. 헤더는 요청 메시지에 대한 정보를 포함하고, 바디는 전송할 데이터를 포함한다.

- 전송 계층(Transport Layer): HTTP 요청 메시지를 받은 전송 계층은 TCP(Transmission Control Protocol) 프로토콜을 사용하여 세그먼트로 분할하고, 각 세그먼트에 시퀀스 번호를 부여하여 전송한다. 이때, 헤더에는 TCP 프로토콜의 제어 정보를 추가한다.

- 네트워크 계층(Network Layer): 전송된 세그먼트를 받은 네트워크 계층은 IP(Internet Protocol) 프로토콜을 사용하여 패킷으로 분할하고, 각 패킷에 IP 주소를 할당하여 전송한다. 이때, 헤더에는 IP 프로토콜의 주소 정보를 추가한다.

- 데이터 링크 계층(Data Link Layer): 패킷을 받은 데이터 링크 계층은 MAC(Media Access Control) 주소를 할당하여 프레임으로 전송한다. 이때, 헤더에는 MAC 주소 정보를 추가한다.

- 물리 계층(Physical Layer): 프레임을 받은 물리 계층은 전기, 광 또는 무선 등의 신호로 변환하여 수신측으로 전송한다.

이처럼 각 계층에서는 데이터 구조를 이용하여 데이터를 전송하고 처리하며, 다음 계층으로 전달될 때 필요한 정보를 추가한다. 이 정보는 각 계층에서 수행한 처리 결과를 나타내며, 다음 계층에서 필요한 정보를 제공한다.

반대로, 하위 계층에서 상위 계층으로 데이터를 전달할 때는 이전 계층에서 추가된 정보를 제거하고, 해당 계층에서 수행한 처리 결과를 상위 계층으로 전달한다. 이를 통해 각 계층에서는 자신이 수행해야 할 기능에만 집중하여, 전체적인 통신 과정을 효율적으로 처리할 수 있다.

이처럼 OSI 7계층 모델에서는 각 계층이 독립적으로 작동하면서, 데이터를 전송하고 처리하는 과정에서 각 계층이 제공하는 서비스를 이용한다. 각 계층은 서로 다른 기능을 수행하며, 이전 계층과 다음 계층 간에는 명확한 인터페이스가 정의되어 있어 데이터의 전송과 처리가 원활하게 이루어진다.


# 캡슐화와 디캡슐화 (Encapsulation / Decapsulation)

캡슐화(Encapsulation)는 상위 계층에서 하위 계층으로 데이터를 전달할 때, 각 계층마다 데이터에 추가 정보를 붙여서 패킷으로 만드는 과정을 말한다. 이렇게 만들어진 패킷은 하위 계층에서 상위 계층으로 전달될 때, 각 계층에서 추가된 정보가 제거되고, 해당 계층에서 필요한 정보만 추출되어 전달된다.

예를 들어, `사용자가 인터넷을 통해 파일을 다운로드하는 과정`에서, 다음과 같은 캡슐화 과정이 이루어진다.

- 응용 계층(Application Layer): 파일 다운로드 요청 메시지를 생성한다. 이 메시지는 헤더와 바디(Body)로 구성된다.

- 전송 계층(Transport Layer): HTTP 요청 메시지를 받은 전송 계층은 TCP(Transmission Control Protocol) 프로토콜을 사용하여 세그먼트로 분할하고, 각 세그먼트에 시퀀스 번호를 부여하여 전송합니다. 이때, 헤더에는 TCP 프로토콜의 제어 정보를 추가한다.

- 네트워크 계층(Network Layer): 전송된 세그먼트를 받은 네트워크 계층은 IP(Internet Protocol) 프로토콜을 사용하여 패킷으로 분할하고, 각 패킷에 IP 주소를 할당하여 전송한다. 이때, 헤더에는 IP 프로토콜의 주소 정보를 추가한다.

- 데이터 링크 계층(Data Link Layer): 패킷을 받은 데이터 링크 계층은 MAC(Media Access Control) 주소를 할당하여 프레임으로 전송한다. 이때, 헤더에는 MAC 주소 정보를 추가한다.

- 물리 계층(Physical Layer): 프레임을 받은 물리 계층은 전기, 광 또는 무선 등의 신호로 변환하여 수신측으로 전송한다.

이렇게 상위 계층에서 하위 계층으로 데이터가 전달될 때, 각 계층에서 추가 정보가 붙어서 패킷으로 만들어지는 것을 캡슐화라고 한다.

반대로, 디캡슐화(Decapsulation)는 하위 계층에서 상위 계층으로 전달된 패킷에서, 각 계층에서 추가된 정보를 제거하고, 해당 계층에서 필요한 정보만 추출하여 상위 계층으로 전달하는 것을 말한다.


# 캡슐화 디캡슐화는 직렬화랑 비슷한건가
캡슐화(Encapsulation)와 직렬화(Serialization)는 서로 다른 개념이다.

캡슐화는 OSI 7계층에서 하위 계층에서 상위 계층으로 데이터를 전달할 때, 각 계층에서 데이터에 추가 정보를 붙여서 패킷으로 만드는 과정을 말합니다. 이렇게 만들어진 패킷은 상위 계층에서 하위 계층으로 전달될 때, 각 계층에서 추가된 정보가 제거되고, 해당 계층에서 필요한 정보만 추출되어 전달된다.

반면, 직렬화는 객체를 바이트 형태로 변환하여 저장하거나 네트워크로 전송할 수 있게 만드는 과정을 말한다. 이 과정에서 객체의 상태 정보를 바이트 스트림으로 변환하여 직렬화된 데이터로 만든다. 이렇게 만들어진 직렬화된 데이터는 전송 또는 저장이 필요한 경우, 다시 역직렬화하여 객체로 복원할 수 있다.

따라서, 캡슐화와 직렬화는 서로 다른 개념이며, 각각 다른 목적을 가지고 있다. 캡슐화는 데이터를 계층적 구조로 나누고 각 계층에서 필요한 정보를 추가하여 전달하는 것을 목적으로 하며, 직렬화는 객체의 상태 정보를 바이트 스트림으로 변환하여 전송이나 저장을 위한 것을 목적으로 한다.
